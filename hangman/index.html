<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
  <title>HangTest</title>
  <style type="text/css">
  /* .matched {
    padding: 5px;
    background-color: green;
    color: white;
  }*/

  .alphabet {
    display: inline-block;
  }

  .unmatched {
    padding: 5px;
    background-color: black;
    color: white;
  }

  .correct {
    background-color: green;
    transition: all 1s ease;
  }

  .card-style {
    padding: 4px;
    margin: 4px;
  }

  .letter {
    display: inline-block;
    padding: 5px;
    background-color: white;
    color: white;
    margin: 2px;
    width: 21px;
    height: auto;
    border-bottom: 1px solid black;
  }

  </style>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
  <script type="text/javascript">
  function hangBegin() {
    console.log("clicked");
    hangInfo.style.display = 'block';
    hangOutput.style.display = 'block';
    hangFeedback.style.display = 'block';

    var guess, currentGuess, letter, letters, lettersToShow, alphabet,
      lettersMatched = lettersGuessed = '',
      numLettersMatched = 0,
      lives = 5,
      wordChoice = ['wolf', 'hyena', 'tiger', 'lion', 'puma', 'fox'],
      // alphabet26 = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h',
      //   'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's',
      //   't', 'u', 'v', 'w', 'x', 'y', 'z'
      // ];
      alphabet26 = "abcdefghijklmnopqrstuvwxyz";

    var alphaDisplay = document.getElementById('alphabetDisplay'),
      livesDisplay = document.getElementById('livesDisplay'),
      wordDisplay = document.getElementById('wordDisplay'),
      currentWord = wordChoice[Math.floor(Math.random() * wordChoice.length)];



    livesDisplay.innerHTML = '<h2>' + lives + '</h2>';
    // alphaDisplay.innerHTML = '<h3 class="text-center">The 26 Alphabets  >>>Just In-case You Forgot<<<</h3>'
    // for (i = 0; i < alphabet26.length; i++) {
    //   alphabet = '<button class="alphabet" style="display:inline-block;" onclick="guess()" id="' + alphabet26.charAt(i).toUpperCase() + '">' + alphabet26.charAt(i).toUpperCase() + '</button>';
    //   // alphabet = '<button class="alphabet">' + alphabet26.charAt(i).toUpperCase() + '</button>'
    //   // alphabet.id = "alphaLetters";
    //   alphabetDisplay.insertAdjacentHTML('beforeend', alphabet);
    // };
    wordDisplay.innerHTML = '';
    for (i = 0; i < currentWord.length; i++) {
      var tempId = "letter_" + currentWord.charAt(i).toUpperCase();
      letter = '<li class="letter" id="letter_' + currentWord.charAt(i) + '">' + currentWord.charAt(i).toUpperCase() + '</li>'
      wordDisplay.insertAdjacentHTML('beforeend', letter);

    };


    var messages = {
      win: 'You win!',
      lose: 'Game over!',
      guessed: ' already guessed, please try again...',
      validLetter: 'Please enter a letter from A-Z'
    };


    var printMatched = function() {
      document.getElementById("alphaCorrect").innerHTML = '';
      for (i = 0; i < lettersMatched.length; i++) {
        var matchedAlpha = '<button class="matched" disabled>' + lettersMatched.charAt(i).toUpperCase() + '</button>';
        // alphabet = '<button class="alphabet">' + alphabet26.charAt(i).toUpperCase() + '</button>'
        // alphabet.id = "alphaLetters";
        document.getElementById("alphaCorrect").insertAdjacentHTML('beforeend', matchedAlpha);
      };
    }

    var printUnmatched = function() {
      document.getElementById("alphaWrong").innerHTML = '';
      for (i = 0; i < lettersGuessed.length; i++) {
        var unmatchedAlpha = '<button class="unmatched" disabled>' + lettersGuessed.charAt(i).toUpperCase() + '</button>';
        // alphabet = '<button class="alphabet">' + alphabet26.charAt(i).toUpperCase() + '</button>'
        // alphabet.id = "alphaLetters";
        document.getElementById("alphaWrong").insertAdjacentHTML('beforeend', unmatchedAlpha);
      };
    }

    // var guess = [];
    // document.getElementById("alpha11").innerHTML = answer.split("");
    // document.getElementById("alpha11").style.display = 'none';
    document.getElementById("alphaCorrect").innerHTML = '';
    document.getElementById("testInput").addEventListener('keydown', (event) => {
      const keyName = event.key;

      if (keyName) {
        /* is guess a valid letter? if so carry on, else error */
        if (alphabet26.indexOf(keyName) > -1) {
          /* has it been guessed (missed or matched) already? if so, abandon & add notice */
          if ((lettersMatched && lettersMatched.indexOf(keyName) > -1) || (lettersGuessed && lettersGuessed.indexOf(keyName) > -1)) {
            output.innerHTML = '"' + keyName.toUpperCase() + '"' + messages.guessed;
            output.classList.add("alert-warning");
          }
          /* does guess exist in current word? if so, add to letters already matched, if final letter added, game over with win message */
          else if (currentWord.indexOf(keyName) > -1) {
            var lettersToShow, wordInCurrent;
            lettersToShow = document.querySelectorAll(".letter" + keyName.toUpperCase());
            var tempId = String("letter_" + keyName);
            document.getElementById(tempId).style.backgroundColor = 'green';

            // for (var i = 0; i < currentWord.length; i++) {
            //   currentWord[i].classList.add("correct");
            // }

            /* check to see if letter appears multiple times */
            for (var j = 0; j < currentWord.length; j++) {
              if (currentWord.charAt(j) === keyName) {
                numLettersMatched += 1;
              }
            }

            lettersMatched += keyName;
            if (numLettersMatched === currentWord.length) {
              printMatched();
              console.log("You Win");
              output.innerHTML = messages.win;
              output.classList.add("alert-sucess");
            }
            printMatched();
          }
          /* guess doesn't exist in current word and hasn't been guessed before, add to lettersGuessed, reduce lives & update user */
          else {
            lettersGuessed += keyName;
            lives--;
            livesDisplay.innerHTML = 'You have ' + lives + ' lives remaining';
            printUnmatched();
            if (lives === 0) {
              console.log("Game Over");
              output.innerHTML = messages.lose;
              output.classList.add("alert-danger");

            }
          }
          /* not a valid letter, error */
        } else {
          output.classList.add('error');
          output.innerHTML = messages.validLetter;
          output.classList.add("alert-warning");
        }
      }
      /* no letter entered, error */
      else {
        output.classList.add('error');
        output.innerHTML = messages.validLetter;
        output.classList.add("alert-warning");
      }

      // removeAlpha(keyName);
      // keyEntered.unshift(keyName);
      // console.log(keyName);
      // console.log(alpha);
      // document.getElementById("alphaType").innerHTML = alpha;
      // document.getElementById("keyType").innerHTML = keyEntered;
      document.getElementById("testInput").value = "";
    })
  };

  </script>
</head>

<body>
  <!-- Using a confirm, ask the user, "Do you like _?" Store their response in a variable. Using a prompt, ask the user, "What kind of _ do you like?" Store their response in a variable. -->
  <div class="container">
    <h1 class="text-center">Hang Man the Game</h1>
    <div class="row py-2">
      <button class="btn btn-block" onclick="hangBegin()">Let The Game Begin!!</button>
    </div>
    <div id="hangInfo" class="row">
      <div id="alphabetDisplay" class="">
      </div>
      <div id="output" class="card text-center card-style">
        <h4>Important Info</h4>
        <ul>
          <li>Hit Enter to reset once you are done with the game</li>
        </ul>
      </div>
      <div class="row mx-auto">
        <div class="col-sm-6">
          <div class="card text-center">
            <h4 class="card-header"> Your Lives </h4>
            <div id="livesDisplay" class="card-block">
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="card text-center">
            <h4 class="card-header">The Word for the Day</h4>
            <p class="text-center">hint: it is either from the dog or cat family.</p>
            <div class="card-block">
              <ul id="wordDisplay">
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="hangOutput" class="row">
      <form id="" class="form-group">
        <h2 class="text-center">Simply start typing in characters to play</h2>
        <input id="testInput" type="text" class="form-control">
      </form>
    </div>
    <div id="hangFeedback" style="display: block;border: 2px solid red;padding: 5px" class="row">
      <h3 class="text-center">Output - Feedback</h3>
      <div id="alphaType">
      </div>
      <div id="keyType">
      </div>
      <div class="row">
        <div class="col-md-6">
          <div class="card card-style text-center">
            <h4 class="card-title text-center">Correct Alphabets</h4>
            <div id="alphaCorrect" class="card-block">
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card card-style text-center">
            <h4 class="card-title text-center">Incorrect Alphabets</h4>
            <div id="alphaWrong" class="card-block">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
  var hangInfo = document.getElementById('hangInfo'),
    hangOutput = document.getElementById('hangOutput'),
    hangFeedback = document.getElementById('hangFeedback');

  function setup() {
    hangInfo.style.display = 'none';
    hangOutput.style.display = 'none';
    hangFeedback.style.display = 'none';
  }

  window.onload = setup();

  </script>
</body>

</html>
